<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Andrea Adventure Graph</title>
  <script src="https://unpkg.com/vis-data@latest/standalone/umd/vis-data.min.js"></script>
  <script src="https://unpkg.com/vis-network@latest/standalone/umd/vis-network.min.js"></script>
  <link href="https://unpkg.com/vis-network@latest/styles/vis-network.css" rel="stylesheet" type="text/css" />
  <style>
    #network {
      width: 100%;
      height: 90vh;
      border: 1px solid lightgray;
    }
    body {
      font-family: sans-serif;
    }
  </style>
</head>
<body>
  <h1>Andrea's Choose Your Own Adventure - Graph View</h1>
  <div id="network"></div>

  <script>
    window.onload = function() {
      console.log('Window loaded, vis object:', typeof vis);
      if (typeof vis === 'undefined') {
        console.error('vis library not loaded properly');
        return;
      }

      const nodes = [
        { id: 0, label: "0\nNYE snow falling.\nLeave house?", group: "start" },
        { id: 1, label: "1\nParty invite open.\nWear Snoopy fit?", group: "normal" },
        { id: 2, label: "2\nSnorlax blocks door.\nWake him?", group: "normal" },
        { id: 3, label: "3\nSnoopy fit ready.\nHead out?", group: "normal" },
        { id: 4, label: "4\nOutfit feels wrong.\nChange clothes?", group: "normal" },
        { id: 5, label: "5\nSnorlax grumbles.\nOffer snacks?", group: "normal" },
        { id: 6, label: "6\nSnorlax unmoved.\nStay home?", group: "normal" },
        { id: 7, label: "7\nDriving in snow.\nSpeed up?", group: "normal" },
        { id: 8, label: "8\nRunning late.\nRush anyway?", group: "normal" },
        { id: 9, label: "9\nYou change outfits.\nMiss party?", group: "normal" },
        { id: 10, label: "10\nSnorlax moves.\nLeave now?", group: "normal" },
        { id: 11, label: "11\nHome alone.\nPlan Cuba trip?", group: "normal" },
        { id: 12, label: "12\nCouch looks comfy.\nTake nap?", group: "normal" },
        { id: 13, label: "13\nRed light ahead.\nRun it?", group: "normal" },
        { id: 14, label: "14\nCareful driving.\nArrive late?", group: "normal" },
        { id: 15, label: "15\nCheap flights found.\nBook Cuba?", group: "normal" },
        { id: 16, label: "16\nTrip feels risky.\nCancel search?", group: "normal" },
        { id: 17, label: "17\nYou fall asleep.\nOversleep?", group: "normal" },
        { id: 18, label: "18\nYou stay awake.\nGo party?", group: "normal" },
        { id: 19, label: "19\nSirens flash.\nPull over?", group: "normal" },
        { id: 20, label: "20\nYou slow down.\nKeep driving?", group: "normal" },
        { id: 21, label: "21\nYou reach party.\nGo inside?", group: "normal" },
        { id: 22, label: "22\nParty nearly over.\nStill enter?", group: "normal" },
        { id: 23, label: "23\nCuba trip booked.\nWIN", group: "end" },
        { id: 24, label: "24\nPlans abandoned.\nLOSE", group: "end" },
        { id: 25, label: "25\nYou oversleep.\nLOSE", group: "end" },
        { id: 26, label: "26\nNap ends.\nResetting night.", group: "normal" },
        { id: 27, label: "27\nOfficer warns you.\nDrive home?", group: "normal" },
        { id: 28, label: "28\nTicket issued.\nLOSE", group: "end" },
        { id: 29, label: "29\nMusic loud inside.\nFind David?", group: "normal" },
        { id: 30, label: "30\nAndrea alone.\nLeave party?", group: "normal" },
        { id: 31, label: "31\nLights shutting down.\nLOSE", group: "end" },
        { id: 32, label: "32\nPranav grabs David.\nStop him?", group: "normal" },
        { id: 33, label: "33\nDavid eating sketchy food.\nWarn him?", group: "normal" },
        { id: 34, label: "34\nFriends fully flake.\nLOSE", group: "end" },
        { id: 35, label: "35\nYou pull David back.\nStay together?", group: "normal" },
        { id: 36, label: "36\nPranav escapes.\nLOSE", group: "end" },
        { id: 37, label: "37\nDavid ignores you.\nInsist harder?", group: "normal" },
        { id: 38, label: "38\nFood poisoning hits.\nLOSE", group: "end" },
        { id: 39, label: "39\nDavid listens.\nCrisis avoided?", group: "normal" },
        { id: 40, label: "40\nHospital visit ends.\nLOSE", group: "end" }
      ];

      const edges = [
        { from: 0, to: 1, label: "Yes" }, { from: 0, to: 2, label: "No" },
        { from: 1, to: 3, label: "Yes" }, { from: 1, to: 4, label: "No" },
        { from: 2, to: 5, label: "Yes" }, { from: 2, to: 6, label: "No" },
        { from: 3, to: 7, label: "Yes" }, { from: 3, to: 8, label: "No" },
        { from: 4, to: 8, label: "Yes" }, { from: 4, to: 9, label: "No" },
        { from: 5, to: 10, label: "Yes" }, { from: 5, to: 6, label: "No" },
        { from: 6, to: 11, label: "Yes" }, { from: 6, to: 12, label: "No" },
        { from: 7, to: 13, label: "Yes" }, { from: 7, to: 14, label: "No" },
        { from: 8, to: 7, label: "Yes" }, { from: 8, to: 11, label: "No" },
        { from: 9, to: 11, label: "Yes" }, { from: 9, to: 7, label: "No" },
        { from: 10, to: 7, label: "Yes" }, { from: 10, to: 11, label: "No" },
        { from: 11, to: 15, label: "Yes" }, { from: 11, to: 16, label: "No" },
        { from: 12, to: 17, label: "Yes" }, { from: 12, to: 18, label: "No" },
        { from: 13, to: 19, label: "Yes" }, { from: 13, to: 20, label: "No" },
        { from: 14, to: 21, label: "Yes" }, { from: 14, to: 22, label: "No" },
        { from: 15, to: 23, label: "Yes" }, { from: 15, to: 16, label: "No" },
        { from: 16, to: 11, label: "Yes" }, { from: 16, to: 24, label: "No" },
        { from: 17, to: 25, label: "Yes" }, { from: 17, to: 26, label: "No" },
        { from: 18, to: 7, label: "Yes" }, { from: 18, to: 11, label: "No" },
        { from: 19, to: 27, label: "Yes" }, { from: 19, to: 28, label: "No" },
        { from: 20, to: 21, label: "Yes" }, { from: 20, to: 27, label: "No" },
        { from: 21, to: 29, label: "Yes" }, { from: 21, to: 30, label: "No" },
        { from: 22, to: 29, label: "Yes" }, { from: 22, to: 31, label: "No" },
        { from: 26, to: 0, label: "Yes" },
        { from: 27, to: 11, label: "Yes" }, { from: 27, to: 21, label: "No" },
        { from: 29, to: 32, label: "Yes" }, { from: 29, to: 33, label: "No" },
        { from: 30, to: 11, label: "Yes" }, { from: 30, to: 34, label: "No" },
        { from: 32, to: 35, label: "Yes" }, { from: 32, to: 36, label: "No" },
        { from: 33, to: 37, label: "Yes" }, { from: 33, to: 38, label: "No" },
        { from: 35, to: 33, label: "Yes" }, { from: 35, to: 30, label: "No" },
        { from: 37, to: 39, label: "Yes" }, { from: 37, to: 38, label: "No" },
        { from: 39, to: 29, label: "Yes" }, { from: 39, to: 30, label: "No" }
      ];

      const container = document.getElementById("network");
      const data = { nodes: new vis.DataSet(nodes), edges: new vis.DataSet(edges) };
      const options = {
        nodes: {
          shape: "box",
          color: {
            background: "#fff",
            border: "#555",
            highlight: { background: "#e0f7fa", border: "#00796b" }
          },
          font: {
            face: 'monospace',
            size: 14
          },
          margin: 10,
          widthConstraint: {
            minimum: 120,
            maximum: 200
          }
        },
        edges: {
          arrows: { to: true },
          font: { 
            align: 'middle',
            size: 12
          },
          smooth: {
            type: 'curvedCW',
            roundness: 0.2
          }
        },
        groups: {
          start: {
            color: { background: '#e3f2fd', border: '#1976d2' },
            borderWidth: 2
          },
          normal: {
            color: { background: '#fff', border: '#555' },
            borderWidth: 1
          },
          end: {
            color: { background: '#f3e5f5', border: '#7b1fa2' },
            borderWidth: 2,
            borderDashes: [5, 5]
          }
        },
        layout: {
          hierarchical: {
            direction: 'LR',
            sortMethod: 'directed',
            levelSeparation: 250,
            nodeSpacing: 150,
            treeSpacing: 200,
            blockShifting: true,
            edgeMinimization: true,
            parentCentralization: true,
            alignment: 'UL'
          }
        },
        physics: false,
        interaction: {
          dragNodes: true,
          dragView: true,
          zoomView: true,
          hover: true,
          tooltipDelay: 200
        }
      };
      new vis.Network(container, data, options);
    };
  </script>
</body>
</html>
